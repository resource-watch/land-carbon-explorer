(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5170:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Le}});var r=a(2809),o=a(7294),n=a(9226),i=a(5564),s=a.n(i),l=a(9008),c=a(9753),u=a(4341),d=a(1631),p=n.v9,f=a(7813),b=a.n(f),m=a(7325),h=a(8350),g=a(8767),v=a(6388),y=JSON.parse('{"data":[{"id":"5c615e0f-f5e7-4e02-a9e0-0248253a46a7","type":"dataset","attributes":{"active":true,"name":"for.003.nrt GLAD Deforestation Alerts","slug":"TEST-GLAD","type":"raster","subtitle":"","application":["rw"],"dataPath":"","attributesPath":null,"connectorType":"rest","provider":"gee","userId":"59a4168c9557070001cb9c77","connectorUrl":"","sources":[],"tableName":"projects/wri-datalab/HansenComposite_14-15","status":"saved","published":false,"overwrite":false,"subscribable":{},"mainDateField":null,"env":"production","geoInfo":true,"protected":false,"legend":{"date":[],"region":[],"country":[],"nested":[],"integer":[],"short":[],"byte":[],"double":[],"float":[],"half_float":[],"scaled_float":[],"boolean":[],"binary":[],"text":[],"keyword":[]},"clonedHost":{},"errorMessage":"","taskId":null,"createdAt":"2019-09-04T19:15:59.268Z","updatedAt":"2020-02-13T02:42:25.409Z","dataLastUpdated":null,"metadata":[{"id":"5ac924b6976f8a0012fba878","type":"metadata","attributes":{"dataset":"5c615e0f-f5e7-4e02-a9e0-0248253a46a7","application":"rw","resource":{"id":"5c615e0f-f5e7-4e02-a9e0-0248253a46a7","type":"dataset"},"language":"en","name":"[Archived] GLAD Deforestation Alerts","description":"_**This dataset has been archived, and we will no longer be updating or maintaining it. We recommend using [this dataset](2598ccc8-f6b3-4ffc-b8f1-13129e9da90c) as a replacement.**_\\n  \\nThis data set, created by the Global Land Analysis and Discovery (GLAD) lab at the University of Maryland and supported by Global Forest Watch, is the first Landsat-based alert system for tree cover loss. While most existing loss alert products use 250 m resolution MODIS imagery, these alerts have a 30 m resolution and thus can detect loss at a much finer spatial scale. The alerts are currently operational for select countries in the Amazon, Congo Basin, and Southeast Asia and will eventually be expanded to the rest of the humid tropics. New Landsat 7 and 8 images are downloaded as they are posted online at USGS EROS, assessed for cloud cover or poor data quality, and compared to the 3 previous years of Landsat-derived metrics (including ranks, means, and regressions of red, infrared, and shortwave bands, and ranks of NDVI, NBR, and NDWI). The metrics and the latest Landsat image are run through 7 decision trees to calculate a median probability of forest disturbance. Pixels with probability > 50% are reported as tree cover loss alerts. For more information on methodology, see the paper in Environmental Research Letters. Alerts remain unconfirmed until 2 or more out of 4 consecutive observations are labeled as tree cover loss. Alerts that remain unconfirmed after subsequent observations are removed from the data set. You can choose to view only confirmed alerts in the menu, but keep in mind that using only confirmed alerts misses the newest detections of tree cover loss. Resource Watch shows only a subset of the dataset. For access to the full dataset and additional information, see the Learn More link.","source":"UMD/GLAD","info":{"rwId":"for.003.nrt [Archived]","data_type":"Raster","name":"[Archived] GLAD Deforestation Alerts","sources":[{"source-name":"University of Maryland (UMD)","id":0,"source-description":""},{"source-name":"Global Land Analysis & Discovery Lab","id":1,"source-description":""}],"technical_title":"Global Land Analysis and Discovery (GLAD) Alert","functions":"Areas of likely tree cover loss in near-real time","cautions":"While Landsat 7 and 8 satellites together have a revisit period of 8 days, cloud cover can significantly limit the availability of imagery, particularly in the wet season. Alert dates represent the instance of detection, though tree cover loss could have taken place earlier, possibly weeks earlier, due to persistent cloud cover. In this data set, \u201ctree cover\u201d is defined as all vegetation greater than 5 m in height with greater than 60% canopy cover and may take the form of natural forests or plantations. \u201cTree cover loss\u201d indicates the canopy removal of at least half a pixel and can be due to a variety of factors, including mechanical harvesting, fire, disease, or storm damage. As such, \u201closs\u201d does not equate to deforestation. In Peru, where the alert system was first developed, the authors evaluated the data to have 13.5% false positives (loss detected where none occurred), though the majority of those false positives (9.5%) occurs on the edges of clearings. On edges, the 30 m Landsat pixels show a mix of forest and other land cover, which makes them prone to error in the system. The rate of false positives drops to 1% when only considering confirmed alerts. The data have 33% false negatives (undetected loss where it has occurred), though most of these occur in secondary forests\u2014likely because the algorithm was created to capture primary forest loss. The higher rate of false negatives compared to false positives also indicates that the alerts are a conservative estimate of the tree cover loss that is actually occurring. When zoomed out, this data layer displays some degree of inaccuracy because the data points must be collapsed to be visible on a larger scale. Zoom in for greater detail.","citation":"Hansen, M.C., A. Krylov, A. Tyukavina, P.V. Potapov, S. Turubanova, B. Zutta, S. Ifo, B. Margono, F. Stolle, and R. Moore. 2016. \\"Humid Tropical Forest Disturbance Alerts Using Landsat Data.\\" Environmental Research Letters 11, no. 3. www.globalforestwatch.org. Accessed through Resource Watch, (date). [www.resourcewatch.org](https://www.resourcewatch.org).","license":"Creative Commons Attribution 4.0 International","license_link":"https://creativecommons.org/licenses/by/4.0/","geographic_coverage":"Brazil, Peru, Burundi, Cameroon, Central African Republic, Democratic Republic of the Congo, Equatorial Guinea, Gabon, Republic of the Congo, Rwanda, Uganda, Brunei, Indonesia, Malaysia, Papua New Guinea, Timor Leste, Russia (Far East only)","spatial_resolution":"30 m","date_of_content":"2015-present","frequency_of_updates":"Weekly","learn_more_link":"http://iopscience.iop.org/article/10.1088/1748-9326/11/3/034008","data_download_link":null,"data_download_original_link":"http://iopscience.iop.org/article/10.1088/1748-9326/11/3/034008"},"columns":{},"createdAt":"2018-04-07T20:06:14.065Z","updatedAt":"2020-06-12T20:05:04.205Z","status":"published"}}],"layer":[{"id":"c34a93ee-58b5-48f4-9d23-31f3d790ac16","type":"layer","attributes":{"name":"Snow Test","slug":"test-glad","dataset":"5c615e0f-f5e7-4e02-a9e0-0248253a46a7","description":"Areas of likely tree cover loss: January 2017 - present for Colombia, Ecuador, French Guiana, Guyana, Suriname, and Venezuela, and January 2015 - present for all other countries covered.","application":["rw"],"iso":[],"provider":"leaflet","userId":"59a4168c9557070001cb9c77","default":true,"protected":false,"published":true,"env":"production","type":"raster","layerConfig":{},"source":{"tiles":["https://storage.googleapis.com/lcl_tiles/test_snow_type/{z}/{x}/{y}.png"],"minzoom":1,"maxzoom":5},"legendConfig":{"type":"basic","items":[{"name":"Deforestation alert","color":"#DA6497","id":0}]},"interactionConfig":{"output":[]},"applicationConfig":{},"staticImageConfig":{},"createdAt":"2020-02-14T14:05:08.080Z","updatedAt":"2020-02-26T21:22:31.405Z"}}],"widgetRelevantProps":[],"layerRelevantProps":[]}},{"id":"20aead6e-fef9-41c7-92c8-ea00edcae077","type":"dataset","attributes":{"active":true,"name":"bio.030 Tiger Conservation Landscapes","slug":"Tiger-Conservation-Landscapes-1490086842553","type":"tabular","subtitle":null,"application":["rw"],"dataPath":null,"attributesPath":null,"connectorType":"rest","provider":"featureservice","userId":"58333dcfd9f39b189ca44c75","connectorUrl":"http://gis-gfw.wri.org/arcgis/rest/services/conservation/MapServer/3?f=pjson","sources":[],"tableName":"conservationMapServer3","status":"saved","published":false,"overwrite":false,"subscribable":{},"mainDateField":null,"env":"production","geoInfo":true,"protected":false,"legend":{},"clonedHost":{},"errorMessage":null,"taskId":null,"createdAt":"2017-02-15T12:20:35.446Z","updatedAt":"2018-08-09T16:41:50.251Z","dataLastUpdated":null,"metadata":[{"id":"5ac924b6976f8a0012fba878","type":"metadata","attributes":{"dataset":"5c615e0f-f5e7-4e02-a9e0-0248253a46a7","application":"rw","resource":{"id":"5c615e0f-f5e7-4e02-a9e0-0248253a46a7","type":"dataset"},"language":"en","name":"[Archived] GLAD Deforestation Alerts","description":"Lorem ipsum metadata","source":"UMD/GLAD","info":{"rwId":"for.003.nrt [Archived]","data_type":"Raster","name":"[Archived] GLAD Deforestation Alerts","sources":[{"source-name":"University of Maryland (UMD)","id":0,"source-description":""},{"source-name":"Global Land Analysis & Discovery Lab","id":1,"source-description":""}],"technical_title":"Global Land Analysis and Discovery (GLAD) Alert","functions":"Areas of likely tree cover loss in near-real time","cautions":"While Landsat 7 and 8 satellites together have a revisit period of 8 days, cloud cover can significantly limit the availability of imagery, particularly in the wet season. Alert dates represent the instance of detection, though tree cover loss could have taken place earlier, possibly weeks earlier, due to persistent cloud cover. In this data set, \u201ctree cover\u201d is defined as all vegetation greater than 5 m in height with greater than 60% canopy cover and may take the form of natural forests or plantations. \u201cTree cover loss\u201d indicates the canopy removal of at least half a pixel and can be due to a variety of factors, including mechanical harvesting, fire, disease, or storm damage. As such, \u201closs\u201d does not equate to deforestation. In Peru, where the alert system was first developed, the authors evaluated the data to have 13.5% false positives (loss detected where none occurred), though the majority of those false positives (9.5%) occurs on the edges of clearings. On edges, the 30 m Landsat pixels show a mix of forest and other land cover, which makes them prone to error in the system. The rate of false positives drops to 1% when only considering confirmed alerts. The data have 33% false negatives (undetected loss where it has occurred), though most of these occur in secondary forests\u2014likely because the algorithm was created to capture primary forest loss. The higher rate of false negatives compared to false positives also indicates that the alerts are a conservative estimate of the tree cover loss that is actually occurring. When zoomed out, this data layer displays some degree of inaccuracy because the data points must be collapsed to be visible on a larger scale. Zoom in for greater detail.","citation":"Hansen, M.C., A. Krylov, A. Tyukavina, P.V. Potapov, S. Turubanova, B. Zutta, S. Ifo, B. Margono, F. Stolle, and R. Moore. 2016. \\"Humid Tropical Forest Disturbance Alerts Using Landsat Data.\\" Environmental Research Letters 11, no. 3. www.globalforestwatch.org. Accessed through Resource Watch, (date). [www.resourcewatch.org](https://www.resourcewatch.org).","license":"Creative Commons Attribution 4.0 International","license_link":"https://creativecommons.org/licenses/by/4.0/","geographic_coverage":"Brazil, Peru, Burundi, Cameroon, Central African Republic, Democratic Republic of the Congo, Equatorial Guinea, Gabon, Republic of the Congo, Rwanda, Uganda, Brunei, Indonesia, Malaysia, Papua New Guinea, Timor Leste, Russia (Far East only)","spatial_resolution":"30 m","date_of_content":"2015-present","frequency_of_updates":"Weekly","learn_more_link":"http://iopscience.iop.org/article/10.1088/1748-9326/11/3/034008","data_download_link":null,"data_download_original_link":"http://iopscience.iop.org/article/10.1088/1748-9326/11/3/034008"},"columns":{},"createdAt":"2018-04-07T20:06:14.065Z","updatedAt":"2020-06-12T20:05:04.205Z","status":"published"}}],"layer":[{"id":"b9d1b315-efc3-433a-82ad-22e841c34f5a","type":"layer","attributes":{"name":"GLAD Alerts","slug":"test-glad","dataset":"20aead6e-fef9-41c7-92c8-ea00edcae077","description":"Areas of likely tree cover loss: January 2017 - present for Colombia, Ecuador, French Guiana, Guyana, Suriname, and Venezuela, and January 2015 - present for all other countries covered.","application":["rw"],"iso":[],"provider":"leaflet","type":"raster","userId":"59a4168c9557070001cb9c77","default":true,"protected":false,"published":true,"env":"production","source":{"tiles":["https://tiles.globalforestwatch.org/glad_prod/tiles/{z}/{x}/{y}.png"],"maxzoom":13},"layerConfig":{},"legendConfig":{"type":"basic","items":[{"name":"Deforestation alert","color":"#DA6497","id":0}]},"interactionConfig":{"output":[]},"applicationConfig":{},"staticImageConfig":{},"createdAt":"2020-02-14T14:05:08.080Z","updatedAt":"2020-02-26T21:22:31.405Z"}}],"widgetRelevantProps":[],"layerRelevantProps":[]}}]}');function w(){return Promise.resolve((0,v.ZP)(y))}function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function j(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,g.useQuery)(["fetch-datasets",e],(function(){return w()}),j({},t))},k=a(219),C=a(3063),P=a(4184),D=a.n(P),A=a(1609),L=a.n(A),E=a(7013),_=a(8716),Z=a(9302),N={dark:{id:"dark",value:"dark",label:"Dark",options:{attribution:'<a href="https://www.mapbox.com/about/maps/" target="_blank">\xa9 Mapbox</a> <a href="http://www.openstreetmap.org/about/" target="_blank">\xa9 OpenStreetMap</a>'}},light:{id:"light",value:"light",label:"Light",options:{attribution:'<a href="https://www.mapbox.com/about/maps/" target="_blank">\xa9 Mapbox</a> <a href="http://www.openstreetmap.org/about/" target="_blank">\xa9 OpenStreetMap</a>'}},satellite:{id:"satellite",value:"satellite",label:"Satellite",options:{attribution:'<a href="https://www.mapbox.com/about/maps/" target="_blank">\xa9 Mapbox</a> <a href="http://www.openstreetmap.org/about/" target="_blank">\xa9 OpenStreetMap</a>'}},terrain:{id:"terrain",value:"terrain",label:"Terrain",options:{attribution:'<a href="https://www.mapbox.com/about/maps/" target="_blank">\xa9 Mapbox</a> <a href="http://www.openstreetmap.org/about/" target="_blank">\xa9 OpenStreetMap</a>'}},aqueduct:{id:"aqueduct",value:"aqueduct",label:"Hydrography",options:{attribution:'<a href="https://www.mapbox.com/about/maps/" target="_blank">\xa9 Mapbox</a> <a href="http://www.openstreetmap.org/about/" target="_blank">\xa9 OpenStreetMap</a>'}}},S={none:{id:"none",label:"No labels",value:"none"},light:{id:"light",label:"Labels light",value:"light"},dark:{id:"dark",label:"Labels dark",value:"dark"}},M={zoom:2,latitude:0,longitude:0,pitch:0,bearing:0,transitionDuration:250,maxZoom:22,minZoom:1},T=a(5893),B=["mapboxApiAccessToken","children","className","viewport","bounds","basemap","labels","boundaries","onMapReady","onMapLoad","onMapViewportChange","dragPan","dragRotate","scrollZoom","touchZoom","touchRotate","doubleClickZoom","width","height","getCursor"];function R(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?R(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):R(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var z=function(e){var t=e.mapboxApiAccessToken,a=e.children,n=e.className,i=e.viewport,s=e.bounds,l=e.basemap,c=e.labels,u=e.boundaries,d=e.onMapReady,p=e.onMapLoad,f=e.onMapViewportChange,b=e.dragPan,m=e.dragRotate,h=e.scrollZoom,g=e.touchZoom,v=e.touchRotate,y=e.doubleClickZoom,w=e.width,x=void 0===w?"100%":w,j=e.height,O=void 0===j?"100%":j,P=e.getCursor,A=(0,k.Z)(e,B),N=(0,o.useRef)(null),S=(0,o.useRef)(null),R=(0,o.useState)(I(I({},M),i)),z=R[0],G=R[1],H=(0,o.useState)(!1),V=H[0],F=H[1],U=(0,o.useState)(!1),W=U[0],q=U[1],J=(0,o.useState)(!1),X=J[0],K=J[1],Y=(0,o.useCallback)((function(){if(!N.current)return!1;var e=["basemap"],t=N.current.getStyle(),a=t.layers,r=t.metadata,o=Object.keys(r["mapbox:groups"]).filter((function(t){var a=r["mapbox:groups"][t].name;return e.map((function(e){return a.toLowerCase().includes(e)})).some((function(e){return e}))})),n=o.map((function(e){return I(I({},r["mapbox:groups"][e]),{},{id:e})})).find((function(e){return e.name.includes(l)})),i=a.filter((function(e){var t=e.metadata;if(!t)return!1;var a=t["mapbox:group"];return o.includes(a)}));return!!n&&(i.forEach((function(e){e.metadata["mapbox:group"]===n.id?N.current.setLayoutProperty(e.id,"visibility","visible"):N.current.setLayoutProperty(e.id,"visibility","none")})),!0)}),[l]),Q=(0,o.useCallback)((function(){var e=["labels"],t=N.current.getStyle(),a=t.layers,r=t.metadata,o=Object.keys(r["mapbox:groups"]).filter((function(t){var a=r["mapbox:groups"][t].name;return e.filter((function(e){return a.toLowerCase().includes(e)})).some((function(e){return e}))})),n=o.map((function(e){return I(I({},r["mapbox:groups"][e]),{},{id:e})})).find((function(e){return e.name.includes(c)}))||{};return a.filter((function(e){var t=e.metadata;if(!t)return!1;var a=t["mapbox:group"];return o.includes(a)})).forEach((function(e){var t=e.metadata["mapbox:group"]===n.id;N.current.setLayoutProperty(e.id,"visibility",t?"visible":"none")})),!0}),[c]),$=(0,o.useCallback)((function(){var e=["boundaries"],t=N.current.getStyle(),a=t.layers,r=t.metadata,o=Object.keys(r["mapbox:groups"]).filter((function(t){var a=r["mapbox:groups"][t].name;return e.map((function(e){return a.toLowerCase().includes(e)})).some((function(e){return e}))}));a.filter((function(e){var t=e.metadata;if(!t)return!1;var a=t["mapbox:group"];return o.includes(a)})).forEach((function(e){N.current.setLayoutProperty(e.id,"visibility",u?"visible":"none")}))}),[u]),ee=(0,o.useCallback)((function(){K(!0),p&&p({map:N.current,mapContainer:S.current}),Y(),Q(),$()}),[p]),te=(0,Z.Z)((function(e){f(e)}),250),ae=(0,o.useCallback)((function(e){G(e),te(e)}),[te]),re=(0,o.useCallback)((function(e){var t=I(I({},z),e);G(t),te(t)}),[z,te]),oe=(0,o.useCallback)((function(){if(!W)return null;var e=s.bbox,t=s.options,a=void 0===t?{}:t,r=s.viewportOptions,o=void 0===r?{}:r,n=o.transitionDuration,i=void 0===n?0:n;if(S.current.offsetWidth<=0||S.current.offsetHeight<=0)return console.error("mapContainerRef doesn't have dimensions"),null;var l=(0,E.Xg)(I({width:S.current.offsetWidth,height:S.current.offsetHeight,bounds:[[e[0],e[1]],[e[2],e[3]]]},a)),c=I({longitude:l.longitude,latitude:l.latitude,zoom:l.zoom,transitionDuration:i,transitionInterruption:C.r8.UPDATE},o);return F(!0),G((function(e){return I(I({},e),c)})),te(c),setTimeout((function(){F(!1)}),+i)}),[W,s,te]),ne=(0,o.useCallback)((function(e){var t=e.isHovering,a=e.isDragging;return t?"pointer":a?"grabbing":"grab"}),[l]);return(0,o.useEffect)((function(){q(!0),d&&d({map:N.current,mapContainer:S.current})}),[d]),(0,o.useEffect)((function(){!L()(s)&&s.bbox&&s.bbox.every((function(e){return!!e}))&&oe()}),[s,oe]),(0,o.useEffect)((function(){G((function(e){return I(I({},e),i)}))}),[i]),(0,o.useEffect)((function(){X&&Y()}),[l]),(0,o.useEffect)((function(){X&&Q()}),[c]),(0,o.useEffect)((function(){X&&$()}),[u]),(0,T.jsx)("div",{ref:S,className:D()((0,r.Z)({"relative w-full h-full z-0":!0},n,!!n)),children:(0,T.jsx)(C.ZP,I(I(I({ref:function(e){e&&(N.current=e.getMap())},mapboxApiAccessToken:t,mapStyle:"mapbox://styles/resourcewatch/cjzmw480d00z41cp2x81gm90h"},A),z),{},{width:x,height:O,dragPan:!V&&b,dragRotate:!V&&m,scrollZoom:!V&&h,touchZoom:!V&&g,touchRotate:!V&&v,doubleClickZoom:!V&&y,onViewportChange:ae,onResize:re,onLoad:ee,getCursor:P||ne,transitionInterpolator:new C.Cf,transitionEasing:_.tw,children:W&&X&&!!N.current&&"function"===typeof a&&a(N.current)}))})},G=a(1076),H=function(e){var t=e.active,a=void 0===t||t,r=e.meta,n=e.disabled;return(0,o.useMemo)((function(){return n?"disabled":r.touched&&r.error?"error":a&&r.touched&&r.valid?"valid":"none"}),[a,r,n])},V={dark:{base:"bg-black border rounded-sm text-blue-500 focus:border-blue-500",status:{none:"border-gray-500",valid:"border-gray-500",error:"border-red-500 focus:border-red-500",disabled:"border-gray-500 opacity-50"}},light:{base:"bg-white border rounded-sm text-blue-500 focus:border-blue-500",status:{none:"border-gray-800",valid:"border-gray-800",error:"border-red-500 focus:border-red-500",disabled:"border-gray-800 opacity-50"}}},F=["theme","input","meta","disabled","className"];function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var q=function(e){var t,a=e.theme,o=void 0===a?"light":a,n=e.input,i=e.meta,s=void 0===i?{}:i,l=e.disabled,c=void 0!==l&&l,u=e.className,d=(0,k.Z)(e,F),p=H({meta:s,disabled:c});return(0,T.jsx)("input",W(W(W({},n),d),{},{type:"checkbox",disabled:c,className:D()((t={"form-checkbox":!0},(0,r.Z)(t,V[o].base,!0),(0,r.Z)(t,V[o].status[p],!0),(0,r.Z)(t,u,!!u),t))}))},J={dark:{base:"bg-gray-800 border rounded-full text-blue-500",status:{none:"border-gray-800",valid:"border-green-800",error:"border-red-500",disabled:"border-gray-800 opacity-50"}},light:{base:"bg-white border rounded-full text-blue-500",status:{none:"border-gray-800",valid:"border-green-800",error:"border-red-500 focus:border-red-500",disabled:"border-gray-800 opacity-50"}}},X=["theme","disabled","input","meta","className"];function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Y(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Q=function(e){var t,a=e.theme,o=void 0===a?"light":a,n=e.disabled,i=void 0!==n&&n,s=e.input,l=void 0===s?{}:s,c=e.meta,u=void 0===c?{}:c,d=e.className,p=(0,k.Z)(e,X),f=H({active:!!l.checked,meta:u,disabled:i});return(0,T.jsx)("input",Y(Y(Y({},l),p),{},{type:"radio",disabled:i,className:D()((t={"form-radio":!0},(0,r.Z)(t,J[o].base,!0),(0,r.Z)(t,J[o].status[f],!0),(0,r.Z)(t,d,!!d),t))}))},$=function(e){var t=e.icon,a=e.className,o=void 0===a?"w-5 h-5":a,n=e.style;return(0,T.jsx)("svg",{className:D()((0,r.Z)({"fill-current":!0},o,o)),viewBox:(null===t||void 0===t?void 0:t.viewBox)||"0 0 32 32",style:n,children:(0,T.jsx)("use",{xlinkHref:"#".concat((null===t||void 0===t?void 0:t.id)||t)})})},ee=a(302),te=a.n(ee),ae=function(e){var t=e.basemap,a=e.labels,r=e.boundaries,n=e.onChangeBasemap,i=e.onChangeLabels,s=e.onChangeBoundaries,l=(0,o.useState)(!1),c=l[0],u=l[1],d=(0,o.useCallback)((function(e){var t=document.getElementById("basemap-selector");t&&t.contains&&!t.contains(e.target)&&u(!1)}),[]),p=(0,o.useCallback)((function(e){n(N[e.target.value])}),[n]),f=(0,o.useCallback)((function(e){i(S[e.target.value])}),[i]),b=(0,o.useCallback)((function(e){s(e.target.checked)}),[s]);return(0,o.useEffect)((function(){return function(){document.removeEventListener("click",d)}}),[]),(0,o.useEffect)((function(){return c?window.addEventListener("click",d):window.removeEventListener("click",d),function(){window.removeEventListener("click",d)}}),[c]),(0,T.jsx)("div",{className:"mt-0.5",children:(0,T.jsx)(G.Z,{attachment:"top right",constraints:[{to:"window"}],targetOffset:"8px 100%",renderTarget:function(e){return(0,T.jsx)("button",{ref:e,type:"button",className:"mt-1 p-1.5 bg-white text-black",onClick:function(){u(!0)},children:(0,T.jsx)($,{icon:te(),className:"w-5 h-5"})})},renderElement:function(e){return c?(0,T.jsxs)("div",{ref:e,className:"bg-white p-4 rounded",id:"basemap-selector",children:[(0,T.jsx)("ul",{className:"flex flex-col",children:Object.keys(N).map((function(e){return(0,T.jsxs)("li",{className:"flex items-center mt-1.5 first:mt-0",children:[(0,T.jsx)(Q,{name:"basemap",title:N[e].label,value:N[e].value,checked:t===N[e].value,onChange:p}),(0,T.jsx)("label",{htmlFor:N[e].label,className:"ml-1.5 text-sm font-normal antialiased text-rw-gray",children:N[e].label})]},N[e].id)}))}),(0,T.jsx)("div",{className:"border-t border-gray-200 my-3"}),(0,T.jsx)("ul",{className:"flex flex-col",children:Object.keys(S).map((function(e){return(0,T.jsxs)("li",{className:"flex items-center mt-1.5 first:mt-0",children:[(0,T.jsx)(Q,{name:"labels",title:S[e].label,value:S[e].value,checked:a===S[e].value,onChange:f}),(0,T.jsx)("label",{htmlFor:S[e].label,className:"ml-1.5 text-sm font-normal antialiased text-rw-gray",children:S[e].label})]},S[e].id)}))}),(0,T.jsx)("div",{className:"border-t border-gray-200 my-3"}),(0,T.jsxs)("div",{className:"flex items-center",children:[(0,T.jsx)(q,{name:"boundaries",title:"Boundaries",value:"boundaries",checked:r,onChange:b,className:"cursor-pointer"}),(0,T.jsx)("label",{htmlFor:"boundaries",className:"ml-1.5 text-sm font-normal antialiased text-rw-gray",children:"Boundaries"})]})]}):null}})})},re=a(1966),oe=a.n(re),ne=a(7183),ie=a.n(ne),se=function(e){var t=e.className,a=e.viewport,n=e.onZoomChange,i=a.zoom,s=a.maxZoom,l=a.minZoom,c=(0,o.useCallback)((function(e){e.stopPropagation(),i+1<=s&&n(i+1)}),[i,s,n]),u=(0,o.useCallback)((function(e){e.stopPropagation(),i+1>=l&&n(i-1)}),[i,l,n]);return(0,T.jsxs)("div",{className:D()((0,r.Z)({"inline-flex flex-col":!0},t,!!t)),children:[(0,T.jsx)("button",{className:D()({"mb-0.5 p-1.5 text-black bg-white ":!0,"hover:bg-gray-100 active:bg-gray-600":i!==s,"opacity-50 cursor-default":i===s}),"aria-label":"Zoom in",type:"button",disabled:i===s,onClick:c,children:(0,T.jsx)($,{icon:oe()})}),(0,T.jsx)("button",{className:D()({"p-1.5 text-black bg-white":!0,"hover:bg-gray-100 active:bg-gray-600":i!==l,"opacity-50 cursor-default":i===l}),"aria-label":"Zoom out",type:"button",disabled:i===l,onClick:u,children:(0,T.jsx)($,{icon:ie()})})]})},le=a(4708),ce=a(9641),ue=a(1279),de=a(3869),pe=a(1770),fe=a(7217),be=a.n(fe),me="absolute top-1/2 inset-x-4 sm:left-1/2 transform -translate-y-1/2 sm:-translate-x-1/2 outline-none bg-white flex flex-col flex-grow overflow-hidden rounded-3xl py-7",he={narrow:"sm:w-4/6 md:w-1/2 lg:w-5/12 xl:w-1/3 ".concat(me),default:"sm:w-4/5 md:w-2/3 lg:1/2 xl:w-2/5 ".concat(me),wide:"sm:w-10/12 md:w-10/12 lg:w-10/12 xl:w-8/12 ".concat(me)};function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ye=function(e){var t,a=e.title,n=e.open,i=e.dismissable,s=void 0===i||i,l=e.size,c=void 0===l?"default":l,u=e.children,d=e.className,p=e.onDismiss,f=(0,o.useRef)(),b=(0,ue.Ir)({isKeyboardDismissDisabled:!s,isDismissable:s,isOpen:n,onClose:p},f).overlayProps,m=(0,ue.dd)().modalProps,h=(0,le.R)({"aria-label":a},f).dialogProps;return(0,ue.tk)({isDisabled:!n}),(0,T.jsx)(de.M,{children:n&&(0,T.jsx)(ue.Xj,{children:(0,T.jsx)(pe.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:0}},exit:{opacity:0,transition:{delay:.125}},className:D()((0,r.Z)({},"z-50 fixed inset-0 bg-black bg-blur",!0)),children:(0,T.jsx)(ce.MT,{contain:!0,restoreFocus:!0,autoFocus:!0,children:(0,T.jsx)("div",ve(ve(ve(ve({},b),h),m),{},{ref:f,children:(0,T.jsxs)(pe.E.div,{initial:{opacity:0,y:"-60%",x:"-50%"},animate:{opacity:1,y:"-50%",x:"-50%",transition:{delay:.125}},exit:{opacity:0,y:"-60%",x:"-50%",transition:{delay:0}},className:D()((t={},(0,r.Z)(t,he[c],!0),(0,r.Z)(t,d,!!d),t)),style:{maxHeight:"90%"},children:[s&&(0,T.jsx)("div",{className:"relative",children:(0,T.jsx)("button",{type:"button",onClick:p,className:"absolute flex items-center px-4 py-4 text-sm text-gray-300 right-4 -top-4 focus:text-black hover:text-black focus:outline-none",children:(0,T.jsx)($,{icon:be(),className:"inline-block w-3 h-3 ml-2 text-black"})})}),o.Children.map(u,(function(e){return(0,o.isValidElement)(e)?(0,o.cloneElement)(e,{onDismiss:p}):null}))]})}))})})})})},we=function(){return(0,T.jsx)("div",{className:"w-96 h-full bg-white z-10",children:"Sidebar"})},xe=a(7739),je=a.n(xe);function Oe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function ke(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Oe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ce=function(e,t){var a=je()(e,"dataset");return Object.keys(a).map((function(e){var r=a[e].find((function(e){var a,r=e.id;return!1===(null===(a=t[r])||void 0===a?void 0:a.visibility)}));return{id:e,dataset:e,visibility:!r,layers:a[e].map((function(e){return ke(ke({},e),{},{active:Boolean(e.default),visibility:!r})}))}}))};function Pe(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function De(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(a),!0).forEach((function(t){(0,r.Z)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Pe(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Ae={title:null,content:null},Le=function(){var e=(0,o.useState)(M),t=e[0],a=e[1],r=(0,o.useState)(Ae),i=r[0],f=r[1],g=(0,o.useState)([]),v=g[0],y=g[1],w=(0,n.I0)(),x=p((function(e){return e.map.basemap})),j=p((function(e){return e.map.labels})),k=p((function(e){return e.map.boundaries})),C=p((function(e){return e.layers})),P=p((function(e){return e.activeDatasets})),D=(0,o.useCallback)((function(e){a(e)}),[]),A=(0,o.useCallback)((function(e){a((function(t){return De(De({},t),{},{zoom:e,transitionDuration:250})}))}),[]),L=(0,o.useCallback)((function(e){var t=e.id;w((0,d.J8)(t))}),[]),E=(0,o.useCallback)((function(e){w((0,d.nr)(e))}),[]),_=(0,o.useCallback)((function(e){var t=e.value;w((0,d.Uu)(t))}),[]),Z=(0,o.useCallback)((function(e){y(e)}),[]),N=(0,o.useCallback)((function(e,t){w((0,u.Kx)({id:e.id,params:{opacity:t}}))}),[]),S=(0,o.useCallback)((function(e){w((0,u.Kx)({id:e.id,params:{visibility:!e.visibility}}))}),[]),B=(0,o.useCallback)((function(){}),[]),R=(0,o.useCallback)((function(e){w((0,c.GR)(P.filter((function(t){return t!==e.dataset}))))}),[P]),I=O({},{placeholderData:[]}).data,G=(0,o.useMemo)((function(){return s()(I.filter((function(e){var t=e.id;return P.includes(t)})).map((function(e){return e.layer.map((function(e){return De(De({},e),C[e.id]||{})}))}))).sort((function(e,t){return v.indexOf(e.dataset)>v.indexOf(t.dataset)?1:-1}))}),[I,P,C,v]),H=(0,o.useMemo)((function(){return Ce(G,C)}),[G,C]),V=(0,o.useCallback)((function(e){var t,a,r,o=null===(t=I.find((function(t){return t.id===e.dataset})))||void 0===t?void 0:t.metadata;f({title:null===o||void 0===o||null===(a=o[0])||void 0===a?void 0:a.name,content:null===o||void 0===o||null===(r=o[0])||void 0===r?void 0:r.description})}),[I]);return(0,o.useEffect)((function(){var e=I.filter((function(e){return e.active})).map((function(e){return e.id}));w((0,c.GR)(e))}),[I]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(l.default,{children:(0,T.jsx)("title",{children:"Land Carbon Explorer"})}),(0,T.jsxs)("div",{className:"flex flex-col h-screen",children:[(0,T.jsx)(we,{}),(0,T.jsxs)("div",{className:"absolute top-0 left-96 right-0 h-full",children:[(0,T.jsx)(z,{mapboxApiAccessToken:"pk.eyJ1IjoicmVzb3VyY2V3YXRjaCIsImEiOiJjajFlcXZhNzcwMDBqMzNzMTQ0bDN6Y3U4In0.FRcIP_yusVaAy0mwAX1B8w",viewport:t,basemap:x,labels:j,boundaries:k,onMapViewportChange:D,children:function(e){return(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(m.LayerManager,{map:e,plugin:b(),children:G.map((function(e){return(0,T.jsx)(m.Layer,De({},e),e.id)}))})})}}),(0,T.jsxs)("div",{className:"z-10 absolute top-10 right-5",children:[(0,T.jsx)(se,{viewport:t,onZoomChange:A}),(0,T.jsx)(ae,{basemap:x,labels:j,boundaries:k,onChangeBasemap:L,onChangeLabels:_,onChangeBoundaries:E})]}),(0,T.jsx)("div",{className:"z-10 absolute bottom-10 left-5",children:(0,T.jsx)(h.Legend,{maxHeight:300,onChangeOrder:Z,children:H.map((function(e,t){return(0,T.jsx)(h.LegendListItem,{index:t,layerGroup:e,toolbar:(0,T.jsx)(h.LegendItemToolbar,{}),onChangeInfo:V,onChangeOpacity:N,onChangeVisibility:S,onChangeLayer:B,onRemoveLayer:R,children:(0,T.jsx)(h.LegendItemTypes,{})},e.id)}))})})]})]}),(0,T.jsx)(ye,{open:Boolean(i.content),onDismiss:function(){return f(Ae)},title:i.title,children:(0,T.jsx)("div",{className:"p-6",children:(0,T.jsx)("p",{children:i.content})})}),(0,T.jsx)(h.Icons,{})]})}},5301:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5170)}])},1966:function(e,t,a){var r=a(7294),o=a(7854),n=a(5348),i=new o({id:"zoom-in-54941248--sprite",use:"zoom-in-54941248--sprite-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="zoom-in-54941248--sprite">\n<path d="M15 8.91304H11.087V5H8.91304V8.91304H5V11.087H8.91304V15H11.087V11.087H15V8.91304Z" />\n</symbol>'});n.add(i);var s=function(e){return r.createElement("svg",Object.assign({viewBox:i.viewBox},e),r.createElement("use",{xlinkHref:"#"+i.id}))};s.viewBox=i.viewBox,s.id=i.id,s.content=i.content,s.url=i.url,s.toString=i.toString,e.exports=s,e.exports.default=s},7183:function(e,t,a){var r=a(7294),o=a(7854),n=a(5348),i=new o({id:"zoom-out-4420dc9b--sprite",use:"zoom-out-4420dc9b--sprite-usage",viewBox:"0 0 20 20",content:'<symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="zoom-out-4420dc9b--sprite">\n<path d="M5 8.91309H15V11.087H5V8.91309Z" />\n</symbol>'});n.add(i);var s=function(e){return r.createElement("svg",Object.assign({viewBox:i.viewBox},e),r.createElement("use",{xlinkHref:"#"+i.id}))};s.viewBox=i.viewBox,s.id=i.id,s.content=i.content,s.url=i.url,s.toString=i.toString,e.exports=s,e.exports.default=s},7217:function(e,t,a){var r=a(7294),o=a(7854),n=a(5348),i=new o({id:"close-31a1ccb8--sprite",use:"close-31a1ccb8--sprite-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="close-31a1ccb8--sprite">\n<title>close</title>\n<path d="M16 11.636l-11.636-11.636-4.364 4.364 11.636 11.636-11.636 11.636 4.364 4.364 11.636-11.636 11.636 11.636 4.364-4.364-11.636-11.636 11.636-11.636-4.364-4.364z" />\n</symbol>'});n.add(i);var s=function(e){return r.createElement("svg",Object.assign({viewBox:i.viewBox},e),r.createElement("use",{xlinkHref:"#"+i.id}))};s.viewBox=i.viewBox,s.id=i.id,s.content=i.content,s.url=i.url,s.toString=i.toString,e.exports=s,e.exports.default=s},302:function(e,t,a){var r=a(7294),o=a(7854),n=a(5348),i=new o({id:"layers-2f433e95--sprite",use:"layers-2f433e95--sprite-usage",viewBox:"0 0 34 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 34 32" id="layers-2f433e95--sprite">\n<title>layers2</title>\n<path d="M27.616 17.497l3.643 2.503-14.556 10-14.556-10 3.641-2.501 10.916 7.501 10.913-7.503zM31.255 12l-14.553 10-14.56-10 14.56-10 14.553 10z" />\n</symbol>'});n.add(i);var s=function(e){return r.createElement("svg",Object.assign({viewBox:i.viewBox},e),r.createElement("use",{xlinkHref:"#"+i.id}))};s.viewBox=i.viewBox,s.id=i.id,s.content=i.content,s.url=i.url,s.toString=i.toString,e.exports=s,e.exports.default=s},7672:function(){},5307:function(){}},function(e){e.O(0,[900,885,634,399,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);